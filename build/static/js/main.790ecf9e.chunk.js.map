{"version":3,"sources":["services/comments-api.js","redux/comments/comments-operations.js","redux/comments/comments-selectors.js","components/GuestBook/GuestBook.jsx","components/Spinner/Spinner.jsx","components/CommentList/CommentList.jsx","components/Modal/Modal.jsx","App.jsx","redux/comments/comments-reducer.js","redux/store.js","index.jsx","App.module.css","components/CommentList/CommentsList.module.css","components/Modal/Modal.module.css"],"names":["BASE_URL","a","axios","get","data","comments","comment","post","commentApi","fetchComments","addComment","createAsyncThunk","_","rejectWithValue","getComments","state","items","getLoading","loading","getError","error","useStyles","makeStyles","root","width","display","flexDirection","marginBottom","GuestBook","toggleModal","useState","name","setName","setComment","classes","dispatch","useDispatch","onSubmit","e","preventDefault","commentsOperations","className","TextField","id","label","value","onChange","currentTarget","variant","color","Button","type","Spinner","style","textAlign","height","timeout","CommentList","useSelector","commentsSelectors","useEffect","length","s","list","map","_id","message","Modal","onClose","children","keydownCloseModal","code","window","addEventListener","removeEventListener","createPortal","backdrop","onClick","target","content","document","querySelector","App","showModal","setShowModal","container","appBar","title","btn","aria-label","itemsReducer","createReducer","fulfilled","payload","loadingReducer","pending","rejected","errorReducer","combineReducers","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","store","configureStore","reducer","commentsReducer","devTools","process","ReactDOM","render","StrictMode","getElementById","module","exports"],"mappings":"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","file":"static/js/main.790ecf9e.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://app-guestbook-test.herokuapp.com'; \n\nexport async function fetchComments() {\n    const { data } = await axios.get(`${BASE_URL}/api/comments`)\n    return data.data.comments;\n}\n\nexport async function addComment(comment) {\n    const { data } = await axios.post(`${BASE_URL}/api/comments`, comment);\n    return data.data.comment;\n};\n\n\nconst commentApi = { fetchComments, addComment};\n\nexport default commentApi;","import { createAsyncThunk } from '@reduxjs/toolkit';\nimport commentApi from '../../services/comments-api'\n\nexport const fetchComments = createAsyncThunk('comments/fetchComments',\n    async (_, { rejectWithValue }) => {\n        try {\n            const comments = await commentApi.fetchComments();\n            return comments;\n        } catch (error) {\n            return rejectWithValue(error);\n        }\n    }\n);\n\nexport const addComment = createAsyncThunk('comments/addComment',\n    async (comment, { rejectWithValue }) => {\n        try {\n        return await commentApi.addComment(comment);\n        } catch (error) {\n            return rejectWithValue(error);\n        }\n    }\n);","export const getComments = state => state.comments.items;\n\nexport const getLoading = state => state.comments.loading;\n\nexport const getError = state => state.comments.error;","import { useDispatch } from 'react-redux';\nimport { useState } from 'react';\nimport { commentsOperations } from '../../redux/comments';\nimport { Button } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    '& .MuiTextField-root': {\n       width: '25ch',\n       display: 'flex',\n       flexDirection: 'column',\n       marginBottom: 15,\n    },\n  },\n}));\n\nconst GuestBook = ({toggleModal}) => {\nconst [name, setName] = useState('');\nconst [comment, setComment] = useState('');\nconst classes = useStyles();\n    \nconst dispatch = useDispatch();\n    \n    const handeleSubmit = e => {\n    e.preventDefault();\n\n    dispatch(commentsOperations.addComment({name, comment}));\n    setName('');\n    setComment('');\n    toggleModal();\n    };\n    \n    return (\n        <div>\n            <form onSubmit={handeleSubmit} className={classes.root}>\n         <TextField\n          id=\"name\"\n          label=\"name\"\n          value={name}\n          name=\"name\"\n          onChange={e => setName(e.currentTarget.value)}\n          variant=\"outlined\"\n          color=\"secondary\"\n                />\n                \n          <TextField\n          id=\"text\"\n          label=\"comment\"\n          value={comment}\n          name=\"comment\"\n          onChange={e => setComment(e.currentTarget.value)}\n          variant=\"outlined\"\n          color=\"secondary\"\n        /> \n        <Button type=\"submit\" variant=\"contained\" color=\"secondary\">\n            Add comment\n          </Button>\n        </form>\n        </div>\n    )\n}\n\nexport default GuestBook;","import Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nconst Spinner = () => {\n  return (\n    <div style={{textAlign: \"center\"}}>\n    <Loader\n      type=\"Bars\"\n      color=\"#ff6b08\"\n      height={100}\n      width={100}\n      timeout={3000}\n      />\n      </div>\n  );\n};\n\nexport default Spinner;","import { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { commentsOperations, commentsSelectors } from '../../redux/comments';\nimport Spinner from '../Spinner/Spinner';\nimport s from './CommentsList.module.css';\n\nconst CommentList = () => {\n  const comments = useSelector(commentsSelectors.getComments);\n  const loading = useSelector(commentsSelectors.getLoading);\n  const error = useSelector(commentsSelectors.getError);\n  const dispatch = useDispatch();\n\nuseEffect(() =>\n  dispatch(commentsOperations.fetchComments()\n  ), [dispatch]);\n\n  return (\n    <>\n      {\n        comments.length > 0 && (\n          <ul className={s.list}>\n            {comments.map(({ _id, name, comment }) => (\n              <li key={_id} className={s.comment}>\n                {name}:  {comment}\n              </li>\n            ))}\n          </ul>)}\n       {loading && (\n        <Spinner  />\n      )}\n      <div>\n        {error && <h1>{error.message}</h1>}\n      </div>\n      </>\n  );\n}\n\nexport default CommentList;","import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\nimport s from './Modal.module.css';\n\nfunction Modal ({onClose, children}) {\n\n    useEffect(() => {\n        const keydownCloseModal = ({ code }) => { code === \"Escape\" && onClose() };\n        window.addEventListener('keydown', keydownCloseModal);\n        return () => window.removeEventListener('keydown', keydownCloseModal);\n    }, [onClose])\n\n    const backdropCloseModal = ({ target, currentTarget }) => {\n        target === currentTarget  && onClose();\n    }\n\n        return createPortal(\n            <div className={s.backdrop} onClick={backdropCloseModal}>\n                <div className={s.content}>{children}</div>\n            </div>\n        , document.querySelector('#modal-root'))\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  children: PropTypes.node.isRequired,\n};\n\nexport default Modal;","import React, { useState } from 'react';\nimport GuestBook from './components/GuestBook/GuestBook'\nimport CommentList from './components/CommentList/CommentList'\nimport Modal from './components/Modal/Modal'\nimport { Button } from '@material-ui/core';\nimport s from './App.module.css'\n\nfunction App() {\n  const [showModal, setShowModal] = useState(false);\n\n  const toggleModal = () => {\n    setShowModal(showModal => !showModal);\n   }\n\n  return (\n    <>\n      <div className={s.container}>\n        <div className={s.appBar}> \n      <h1 className={s.title}>Comments</h1>\n          <div className={s.btn}>\n            <Button onClick={toggleModal} aria-label=\"Open Modal\" variant=\"contained\" color=\"secondary\">Add comment</Button>\n          </div>\n        </div> \n\n        {showModal && (\n          <Modal onClose={toggleModal}>\n            <GuestBook toggleModal={toggleModal}/>\n    </Modal>)\n  }\n        <CommentList />\n        </div>\n      </>\n  );\n}\n\nexport default App;\n","import { combineReducers } from 'redux';\nimport { createReducer } from '@reduxjs/toolkit';\nimport { fetchComments, addComment } from './comments-operations';\n\nconst itemsReducer = createReducer([], {\n    [fetchComments.fulfilled]: (_, { payload }) => payload,\n    [addComment.fulfilled]: (state, { payload }) => [...state, payload],\n});\n\nconst loadingReducer = createReducer(false, {\n    [fetchComments.pending]: () => true,\n    [fetchComments.fulfilled]: () => false,\n    [fetchComments.rejected]: () => false,\n\n    [addComment.pending]: () => true,\n    [addComment.fulfilled]: () => false,\n    [addComment.rejected]: () => false,\n});\n\nconst errorReducer = createReducer(null, {\n    [fetchComments.rejected]: (_, { payload }) => payload,\n    [fetchComments.pending]: () => null,\n\n    \n    [addComment.rejected]: (_, { payload }) => payload,\n    [addComment.pending]: () => null,\n})\n\nexport default combineReducers({\n    items: itemsReducer,\n    loading: loadingReducer,\n    error: errorReducer,\n})\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\nimport {\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER\n} from 'redux-persist';\nimport commentsReducer from './comments/comments-reducer';\n\nconst middleware = [\n  ...getDefaultMiddleware({\n    serializableCheck: {\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n    },\n  }),\n];\n\n export const store = configureStore({\n   reducer: {\n  comments: commentsReducer,\n},\n   middleware,\n  devTools: process.env.NODE_ENV === 'development',\n});\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { Provider } from 'react-redux';\nimport App from './App';\nimport store from './redux/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n       <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appBar\":\"App_appBar__VaADL\",\"title\":\"App_title__-GfWs\",\"container\":\"App_container__1MQN3\",\"btn\":\"App_btn__34jjX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"CommentsList_list__24se4\",\"comment\":\"CommentsList_comment__3AFl8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__3FAPo\",\"content\":\"Modal_content__1VIbZ\"};"],"sourceRoot":""}