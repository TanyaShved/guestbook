(this.webpackJsonpguestbook=this.webpackJsonpguestbook||[]).push([[0],{120:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"fetchComments",(function(){return g})),n.d(r,"addComment",(function(){return _}));var c={};n.r(c),n.d(c,"getComments",(function(){return y})),n.d(c,"getLoading",(function(){return C})),n.d(c,"getError",(function(){return w}));var a=n(0),o=n.n(a),u=n(7),i=n.n(u),s=(n(74),n(19)),l=n(36),d=n(18),m=n.n(d),j=n(29),b=n(17),f=n(45),p=n.n(f),O="https://app-guestbook-test.herokuapp.com";function h(){return(h=Object(j.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(O,"/api/comments"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n.data.comments);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(j.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat(O,"/api/comments"),t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r.data.comment);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x={fetchComments:function(){return h.apply(this,arguments)},addComment:function(e){return v.apply(this,arguments)}},g=Object(b.b)("comments/fetchComments",function(){var e=Object(j.a)(m.a.mark((function e(t,n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,x.fetchComments();case 4:return c=e.sent,e.abrupt("return",c);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),_=Object(b.b)("comments/addComment",function(){var e=Object(j.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,x.addComment(t);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),y=function(e){return e.comments.items},C=function(e){return e.comments.loading},w=function(e){return e.comments.error},k=n(155),A=n(154),N=n(150),E=n(6),M=Object(N.a)((function(){return{root:{"& .MuiTextField-root":{width:"25ch",display:"flex",flexDirection:"column",marginBottom:15}}}})),L=function(e){var t=e.toggleModal,n=Object(a.useState)(""),c=Object(l.a)(n,2),o=c[0],u=c[1],i=Object(a.useState)(""),d=Object(l.a)(i,2),m=d[0],j=d[1],b=M(),f=Object(s.b)();return Object(E.jsx)("div",{children:Object(E.jsxs)("form",{onSubmit:function(e){e.preventDefault(),f(r.addComment({name:o,comment:m})),u(""),j(""),t()},className:b.root,children:[Object(E.jsx)(A.a,{id:"name",label:"name",value:o,name:"name",onChange:function(e){return u(e.currentTarget.value)},variant:"outlined",color:"secondary"}),Object(E.jsx)(A.a,{id:"text",label:"comment",value:m,name:"comment",onChange:function(e){return j(e.currentTarget.value)},variant:"outlined",color:"secondary"}),Object(E.jsx)(k.a,{type:"submit",variant:"contained",color:"secondary",children:"Add comment"})]})})},B=n(63),S=n.n(B),F=(n(119),function(){return Object(E.jsx)("div",{style:{textAlign:"center"},children:Object(E.jsx)(S.a,{type:"Bars",color:"#ff6b08",height:100,width:100,timeout:3e3})})}),T=n(46),V=n.n(T),D=function(){var e=Object(s.c)(c.getComments),t=Object(s.c)(c.getLoading),n=Object(s.c)(c.getError),o=Object(s.b)();return Object(a.useEffect)((function(){return o(r.fetchComments())}),[o]),Object(E.jsxs)(E.Fragment,{children:[e.length>0&&Object(E.jsx)("ul",{className:V.a.list,children:e.map((function(e){var t=e._id,n=e.name,r=e.comment;return Object(E.jsxs)("li",{className:V.a.comment,children:[n,":  ",r]},t)}))}),t&&Object(E.jsx)(F,{}),Object(E.jsx)("div",{children:n&&Object(E.jsx)("h1",{children:n.message})})]})},W=n(47),I=n.n(W);var J=function(e){var t=e.onClose,n=e.children;return Object(a.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[t]),Object(u.createPortal)(Object(E.jsx)("div",{className:I.a.backdrop,onClick:function(e){e.target===e.currentTarget&&t()},children:Object(E.jsx)("div",{className:I.a.content,children:n})}),document.querySelector("#modal-root"))},P=n(37),q=n.n(P);var z,G,Q,X=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],c=function(){r((function(e){return!e}))};return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{className:q.a.container,children:[Object(E.jsxs)("div",{className:q.a.appBar,children:[Object(E.jsx)("h1",{className:q.a.title,children:"Comments"}),Object(E.jsx)("div",{className:q.a.btn,children:Object(E.jsx)(k.a,{onClick:c,"aria-label":"Open Modal",variant:"contained",color:"secondary",children:"Add comment"})})]}),n&&Object(E.jsx)(J,{onClose:c,children:Object(E.jsx)(L,{toggleModal:c})}),Object(E.jsx)(D,{})]})})},Z=n(42),H=n(25),K=n(14),R=n(11),U=Object(b.c)([],(z={},Object(K.a)(z,g.fulfilled,(function(e,t){return t.payload})),Object(K.a)(z,_.fulfilled,(function(e,t){var n=t.payload;return[].concat(Object(Z.a)(e),[n])})),z)),Y=Object(b.c)(!1,(G={},Object(K.a)(G,g.pending,(function(){return!0})),Object(K.a)(G,g.fulfilled,(function(){return!1})),Object(K.a)(G,g.rejected,(function(){return!1})),Object(K.a)(G,_.pending,(function(){return!0})),Object(K.a)(G,_.fulfilled,(function(){return!1})),Object(K.a)(G,_.rejected,(function(){return!1})),G)),$=Object(b.c)(null,(Q={},Object(K.a)(Q,g.rejected,(function(e,t){return t.payload})),Object(K.a)(Q,g.pending,(function(){return null})),Object(K.a)(Q,_.rejected,(function(e,t){return t.payload})),Object(K.a)(Q,_.pending,(function(){return null})),Q)),ee=Object(R.c)({items:U,loading:Y,error:$}),te=Object(Z.a)(Object(b.d)({serializableCheck:{ignoredActions:[H.a,H.f,H.b,H.c,H.d,H.e]}})),ne=Object(b.a)({reducer:{comments:ee},middleware:te,devTools:!1});i.a.render(Object(E.jsx)(o.a.StrictMode,{children:Object(E.jsx)(s.a,{store:ne,children:Object(E.jsx)(X,{})})}),document.getElementById("root"))},37:function(e,t,n){e.exports={appBar:"App_appBar__VaADL",title:"App_title__-GfWs",container:"App_container__1MQN3",btn:"App_btn__34jjX"}},46:function(e,t,n){e.exports={list:"CommentsList_list__24se4",comment:"CommentsList_comment__3AFl8"}},47:function(e,t,n){e.exports={backdrop:"Modal_backdrop__3FAPo",content:"Modal_content__1VIbZ"}},74:function(e,t,n){}},[[120,1,2]]]);
//# sourceMappingURL=main.790ecf9e.chunk.js.map